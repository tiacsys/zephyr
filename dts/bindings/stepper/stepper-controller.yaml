# SPDX-FileCopyrightText: Copyright (c) 2024 Carl Zeiss Meditec AG
# SPDX-License-Identifier: Apache-2.0

description: Stepper Controller

include:
  - name: pinctrl-device.yaml

properties:
  invert-direction:
    type: boolean
    description: |
      Invert motor direction.

  micro-step-res:
    type: int
    default: 1
    enum:
      - 1
      - 2
      - 4
      - 8
      - 16
      - 32
      - 64
      - 128
      - 256
    description: |
      micro-step resolution to be set while initializing the device driver.

  en-gpios:
    type: phandle-array
    description: |
      GPIO pins used to control the enable signal of the motor driver.

  step-gpios:
    type: phandle-array
    description: |
      The GPIO pins used to send step signals to the stepper motor.

  dir-gpios:
    type: phandle-array
    description: |
      The GPIO pins used to send direction signals to the stepper motor.
      Pin will be driven high for forward direction and low for reverse direction.

  counter:
    type: phandle
    description: Counter used for generating step-accurate pulse signals.

  step-generator:
    type: phandle
    description: Counter used for generating step-accurate pulse signals.

  step-counter:
    type: phandle
    description: Counter used for counting steps.

  trigger-input:
    type: int
    description: |
      Value describing the connection between step-generator otput and step-counter
      clocking input, depends on board and used counters

  output-channel:
    type: int
    description: |
      Output channel of the timer for the step signal. Note that this is completely
      distinct from step-gpios. It needs to match the channel of the pinctrl.
