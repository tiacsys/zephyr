# SPDX-FileCopyrightText: Copyright (c) 2024 Navimatix GmbH
# SPDX-License-Identifier: Apache-2.0

description: |
  TI DRV8424 stepper motor driver with acceleration and deceleration in move_to/move_by.
  SAFETY:
  The counter needs to support both set_top_value functionalities: Setting a new top value and
  attaching an ISR to the turnaround.
  SAFETY:
  The step gpio pinneeds to be connected directly to the SOC GPIO controller, connecting the
  pin to a controller connected via a bus such as i2c or others will lead to undefined behaviour.

compatible: "ti,drv8424-accel"

properties:

  dir-gpios:
    required: true
    type: phandle-array
    description: Direction pin.

  step-gpios:
    required: true
    type: phandle-array
    description: Step pin, configured as gpio.

  fault-gpios:
    type: phandle-array
    description: Fault pin.

  en-gpios:
    type: phandle-array
    description: Enable pin.

  sleep-gpios:
    type: phandle-array
    description: Sleep pin (active low).

  m0-gpios:
    type: phandle-array
    description: Microstep configuration pin 0.

  m1-gpios:
    type: phandle-array
    description: Microstep configuration pin 1.

  counter:
    required: true
    type: phandle
    description: Counter used for generating step-accurate pulse signals.

  acceleration:
    required: true
    type: int
    description: |
      Stepper motor acceleration in full-steps/s, automatically gets 
      adjusted when using microsteps

include: stepper-controller.yaml
